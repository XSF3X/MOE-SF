<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة التحكم - إدارة المستخدمين</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

:root {
  --bg: #0f172a;
  --card: #1e293b;
  --border-soft: rgba(255,255,255,0.08);
  --text-main: #f8fafc;
  --text-muted: #94a3b8;
  --primary: #22c55e;
  --radius: 14px;
  --shadow: 0 8px 25px rgba(0,0,0,0.35);
}

body {
  margin: 0;
  font-family: "Cairo", sans-serif;
  background: var(--bg);
  color: var(--text-main);
  padding: 25px;
}

h1 {
  margin-bottom: 25px;
  text-align: center;
}

/* زر الرجوع */
.back-btn {
  padding: 10px 18px;
  border-radius: var(--radius);
  border: 1px solid var(--border-soft);
  background: rgba(255,255,255,0.08);
  color: var(--text-main);
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  transition: 0.18s ease-out;
  margin-bottom: 20px;
  box-shadow: var(--shadow);
}
.back-btn:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

/* صندوق إضافة مستخدم */
#addBox {
  background: var(--card);
  padding: 20px;
  border-radius: var(--radius);
  border: 1px solid var(--border-soft);
  box-shadow: var(--shadow);
  margin-bottom: 25px;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: var(--radius);
  border: 1px solid #334155;
  background: rgba(255,255,255,0.07);
  color: var(--text-main);
  font-size: 15px;
  margin-bottom: 12px;
  outline: none;
  transition: .25s;
}
input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(34,197,94,0.35);
}

button {
  padding: 10px 16px;
  border-radius: var(--radius);
  cursor: pointer;
  border: none;
  font-weight: 700;
  transition: 0.18s ease-out;
}

.btn-add {
  background: var(--primary);
  color: #022c22;
  width: 100%;
}
.btn-add:hover {
  background: #16a34a;
}

/* جدول المستخدمين */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 18px;
}
th, td {
  padding: 14px;
  border-bottom: 1px solid var(--border-soft);
  text-align: center;
}
th {
  color: var(--text-muted);
  font-size: 14px;
}
.delete-btn {
  padding: 6px 14px;
  border-radius: var(--radius);
  background: #ef4444;
  color: white;
  border: none;
  cursor: pointer;
}
.delete-btn:hover {
  background: #dc2626;
}

/* زر تسجيل الخروج */
.logout {
  margin-top: 25px;
  padding: 10px 22px;
  background: #334155;
  border-radius: var(--radius);
  color: var(--text-main);
  border: none;
  cursor: pointer;
  font-weight: 700;
}
.logout:hover {
  background: #475569;
}
</style>
</head>

<body>

<h1>لوحة التحكم</h1>

<!-- زر الرجوع -->
<button class="back-btn" onclick="goHome()">العودة للصفحة الرئيسية</button>

<div id="addBox">
  <h3 style="margin-top:0;">إضافة مستخدم جديد</h3>
  <input id="newUser" placeholder="اسم المستخدم">
  <input id="newPass" placeholder="كلمة المرور">
  <button class="btn-add" onclick="addUser()">إضافة</button>
</div>

<h3>قائمة المستخدمين</h3>
<table>
  <thead>
    <tr>
      <th>اسم المستخدم</th>
      <th>كلمة المرور</th>
      <th>حذف</th>
    </tr>
  </thead>
  <tbody id="usersTable"></tbody>
</table>

<button class="logout" onclick="logout()">تسجيل الخروج</button>

<script>
// ======= تحميل المستخدمين =======
function loadUsers() {
  let users = JSON.parse(localStorage.getItem("usersDB") || "[]");
  const table = document.getElementById("usersTable");
  table.innerHTML = "";

  users.forEach((u, i) => {
    table.innerHTML += `
      <tr>
        <td>${u.user}</td>
        <td>${u.pass}</td>
        <td><button class="delete-btn" onclick="deleteUser(${i})">حذف</button></td>
      </tr>
    `;
  });
}

// ======= إضافة مستخدم =======
function addUser() {
  const u = document.getElementById("newUser").value.trim();
  const p = document.getElementById("newPass").value.trim();

  if (!u || !p) {
    alert("الرجاء تعبئة جميع الحقول.");
    return;
  }

  let users = JSON.parse(localStorage.getItem("usersDB") || "[]");
  users.push({ user: u, pass: p });
  localStorage.setItem("usersDB", JSON.stringify(users));

  document.getElementById("newUser").value = "";
  document.getElementById("newPass").value = "";

  loadUsers();
}

// ======= حذف =======
function deleteUser(i) {
  let users = JSON.parse(localStorage.getItem("usersDB") || "[]");
  users.splice(i, 1);
  localStorage.setItem("usersDB", JSON.stringify(users));
  loadUsers();
}

// ======= زر العودة =======
function goHome() {
  window.location.href = "index.html";
}

// ======= تسجيل الخروج =======
function logout() {
  localStorage.removeItem("loggedInUser");
  window.location.href = "login.html";
}

// ======= منع الوصول =======
(function check() {
  let user = localStorage.getItem("loggedInUser");
  if (!user || user !== "admin") {
    window.location.href = "login.html";
  }
  loadUsers();
})();
</script>

</body>
</html>
